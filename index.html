<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="stylesheet" href="css/index.css"/>
  <link rel="stylesheet" href="css/scroll.css">
  <link rel="stylesheet" href="css/test.css">
  <title>Hello GitHub</title>
</head>
<body>
<div class="smooth">
  <div class="header">
    <ul>
      <li><a href="#home">home</a></li>
      <li><a href="#about">about</a></li>
      <li><a href="#price">price</a></li>
      <li><a href="#contact">contact</a></li>
    </ul>
  </div>
  <section id="home">
    <div id="test">
      <ul>
        <li>
          <p>ü¶ä</p>
        </li>
        <li>
          <p>üê∂</p>
        </li>
        <li>
          <p>ü¶Ñ</p>
        </li>
      </ul>
    </div>
  </section>
  <section id="about">
    <h2>Section about</h2>
  </section>
  <section id="price">
    <h2>Section price</h2>
  </section>
  <section id="contact">
    <h2>Section contact</h2>
  </section>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.20.0/TweenMax.min.js"></script>
<script>
  class HoverButton {
    constructor(el) {
      this.el = el;
      this.hover = false;
      this.calculatePosition();
      this.attachEventsListener();
    }

    attachEventsListener() {
      window.addEventListener('mousemove', e => this.onMouseMove(e));
      window.addEventListener('resize', e => this.calculatePosition(e));
    }

    calculatePosition() {
      TweenMax.set(this.el, {
        x: 0,
        y: 0,
        scale: 1
      });

      const box = this.el.getBoundingClientRect();
      this.x = box.left + box.width * 0.5;
      this.y = box.top + box.height * 0.5;
      this.width = box.width;
      this.height = box.height;
    }

    onMouseMove(e) {
      let hover = false;
      let hoverArea = this.hover ? 0.7 : 0.5;
      let x = e.clientX - this.x;
      let y = e.clientY - this.y;
      let distance = Math.sqrt(x * x + y * y);
      if (distance < this.width * hoverArea) {
        hover = true;
        if (!this.hover) {
          this.hover = true;
        }
        this.onHover(e.clientX, e.clientY);
      }

      if (!hover && this.hover) {
        this.onLeave();
        this.hover = false;
      }
    }

    onHover(x, y) {
      TweenMax.to(this.el, 0.4, {
        x: (x - this.x) * 0.4,
        y: (y - this.y) * 0.4,
        scale: 1.15,
        ease: Power2.easeOut
      });

      this.el.style.zIndex = 10;
    }

    onLeave() {
      TweenMax.to(this.el, 0.7, {
        x: 0,
        y: 0,
        scale: 1,
        ease: Elastic.easeOut.config(1.2, 0.4)
      });

      this.el.style.zIndex = 1;
    }
  }


  const btn1 = document.querySelector('li:nth-child(1) p');
  new HoverButton(btn1);

  const btn2 = document.querySelector('li:nth-child(2) p');
  new HoverButton(btn2);

  const btn3 = document.querySelector('li:nth-child(3) p');
  new HoverButton(btn3);
</script>
</body>
</html>
